global:
  storageClass: "keycloak"
auth:
  adminUser: demo-admin
  adminPassword: "RancherDemo@123"
tls:
  enabled: true
  autoGenerated: true
ingress:
  enabled: true
  ingressClassName: "nginx"
  hostname: keycloak-oidc.34-38-175-177.sslip.io
  annotations: 
    cert-manager.io/cluster-issuer: letsencrypt-prod
  tls: true
  selfSigned: true
adminIngress:
  enabled: true
  ingressClassName: "nginx"
  hostname: keycloak.34-38-175-177.sslip.io
  annotations: 
    cert-manager.io/cluster-issuer: letsencrypt-prod
  tls: true
  selfSigned: true
extraEnvVars:
  - name: KEYCLOAK_PROXY_ADDRESS_FORWARDING
    value: "true"
  - name: KEYCLOAK_USER
    value: "dmeo-admin"
  - name: KEYCLOAK_PASSWORD
    value: "RancherDemo@123"
  - name: KEYCLOAK_FRONTEND_URL
    value: "https://keycloak.34-38-175-177.sslip.io/auth/"



    helm install keycloak oci://registry-1.docker.io/bitnamicharts/keycloak --namespace keycloak --create-namespace -f value.yaml


    wget -q -O - https://raw.githubusercontent.com/keycloak/keycloak-quickstarts/latest/kubernetes/keycloak-ingress.yaml | \
sed "s/KEYCLOAK_HOST/keycloak.34-38-175-177.sslip.io/" | \
kubectl create -f -



helm install keycloak bitnami/keycloak -f value.yaml --create-namespace --namespace keycloak


kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/v0.0.26/deploy/local-path-storage.yaml

apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: keycloak
  namespace: keycloak
provisioner: rancher.io/local-path
volumeBindingMode: WaitForFirstConsumer
reclaimPolicy: Retain

apiVersion: v1
kind: PersistentVolume
metadata:
  name: keycloak
  namespace: keycloak 
spec:
  storageClassName: keycloak
  capacity:
    storage: 10Gi
  accessModes:
  - ReadWriteOnce